{% extends 'base.html.twig' %}

{% block title %}Dons index
{% endblock %}

{% block content %}
  

	<section class="services" id="services">
		<div class="container-fluid py-5">
			<div class="container">
				<div class="text-center mx-auto mb-5" style="max-width: 500px;">
					<h5 class="d-inline-block text-primary text-uppercase border-bottom border-5">Services</h5>
					<h1 class="display-4">Dons</h1>
					{% if is_granted('ROLE_DONATEUR') %}
						<a href="{{ path('app_don_new') }}">Ajouter un Don</a>
					{% endif %}
					<br>
					<br>
				</div>
			</div>
		</div>

		<!-- Extended Form with Search Bar -->
		<!-- Extended Form with Search Bar -->


		<!-- Affichage des dons -->
			<div class="row g-5" id="donationsContainer"> {% for don in dons %}
				<div class="col-lg-4 col-md-6">
					<div class="service-item bg-light rounded d-flex flex-column align-items-center justify-content-center text-center">
						<div class="service-icon mb-4">
							<i class="fa fa-2x fa-user-md text-white"></i>
						</div>
						<h4 class="mb-3">Don
							{{ don.id }}</h4>
						<p class="m-0">
							<strong>Date Don:</strong>
							{{ don.DateDon ? don.DateDon|date('Y-m-d H:i:s') : '' }}<br>
							<strong>Date dernier don:</strong>
							{{ don.datedernierdon ? don.datedernierdon|date('Y-m-d') : '' }}<br>
							<strong>Type de don:</strong>
							{{ don.typededon }}<br>
						</p>
						<div class="btn-group mt-3">
							<button id="toggleButton">Afficher la page HTML</button>
							<div id="overlay">


								<h1 class="title">Dons</h1>
								<div class="don-container">
									<div class="don-card">
										<div class="don-card-body">
											<table class="don-table">
												<tbody>
													<tr>
														<th>Id</th>
														<td>{{ don.id }}</td>
													</tr>
													<tr>
														<th>DateDon</th>
														<td>{{ don.DateDon ? don.DateDon|date('Y-m-d H:i:s') : '' }}</td>
													</tr>
													<tr>
														<th>Datedernierdon</th>
														<td>{{ don.datedernierdon ? don.datedernierdon|date('Y-m-d') : '' }}</td>
													</tr>
													<tr>
														<th>Genre</th>
														<td>{{ don.genre }}</td>
													</tr>
													<tr>
														<th>GroupeSanguin</th>
														<td>{{ don.GroupeSanguin }}</td>
													</tr>
													<tr>
														<th>Etatmarital</th>
														<td>{{ don.Etatmarital }}</td>
													</tr>
													<tr>
														<th>Typededon</th>
														<td>{{ don.typededon }}</td>
													</tr>
													<tr>
														<th>Cin</th>
														<td>{{ don.Cin }}</td>
													</tr>
												</tbody>
											</table>
											<div class="button-group">
												<a href="{{ path('app_dons_edit', {'id': don.id}) }}" class="btn btn-edit">Edit</a>
                                                <button id="backButton">Back</button>
												{{ include('dons/_delete_form.html.twig') }}
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		{% else %}
			<div class="col-12">
				<p class="text-center">Aucun don trouvé.</p>
			</div>
		{% endfor %}
	</div>

	<!-- Load More Button -->
	<div class="text-center mt-4">
		<button id="loadMore" class="btn btn-primary">Load More</button>
	</div>
</section>
<style>
    
	#overlay {
		display: none;
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background-color: rgba(0, 0, 0, 0.5); /* Couleur de fond transparente */
	}

	#content {
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		background-color: transparent;
		padding: 20px;
	}
	/* Style pour les en-têtes de colonnes */
	.don-table th {
		background-color: #e9ecef;
		text-align: left;
		font-family: 'Roboto', sans-serif; /* Utilisation de la police Roboto */
		font-size: 16px; /* Taille de la police */
		font-weight: 700; /* Poids de la police (gras) */
		color: #333; /* Couleur du texte */
		padding: 10px; /* Espacement intérieur */
		border-bottom: 1px solid #ddd; /* Bordure inférieure */
	}
/* Style pour les cellules de données */
.don-table td {
    font-family: 'Open Sans', sans-serif;}

	.don-card {
		background-color: #f8f9fa; /* Couleur de fond de la carte */
		border: 1px solid #dee2e6; /* Bordure de la carte */
		border-radius: 10px;
		box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); /* Ombre légère */
	}

	.don-card-body {
		padding: 20px;
	}

	.don-card-title {
		font-size: 24px;
		color: #343a40; /* Couleur du titre */
		margin-bottom: 20px;
	}

	.don-card-content {
		font-size: 16px;
		color: #6c757d; /* Couleur du texte */
	}

	.don-card-button {
		background-color: #007bff; /* Couleur de fond du bouton */
		color: #fff; /* Couleur du texte du bouton */
		padding: 10px 20px;
		border: none;
		border-radius: 5px;
		cursor: pointer;
		transition: background-color 0.3s ease;
	}

	.don-card-button:hover {
		background-color: #0056b3; /* Couleur de fond du bouton au survol */
	}

	/* Style pour le titre */
	/* Titres */
	.title {
		font-family: 'Roboto', sans-serif; /* Utilisation de la police Roboto */
		font-size: 24px;
		font-weight: 700; /* Poids de la police (gras) */
		color: #333; /* Couleur du texte */
		margin-bottom: 20px; /* Marge inférieure */
	}


	/* Style pour le conteneur du don */
	.don-container {
		display: flex;
		justify-content: center;
	}

	/* Style pour la carte du don */
	.don-card {
		width: 80%;
		max-width: 600px;
		background-color: #f8f9fa;
		border-radius: 10px;
		box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
		margin-top: 20px;
	}

	/* Style pour le corps de la carte du don */
	.don-card-body {
		padding: 20px;
	}

	/* Style pour le tableau du don */
	.don-table {
		width: 100%;
		border-collapse: collapse;
	}

	/* Style pour les cellules du tableau */
	.don-table th,
	.don-table td {
		padding: 10px;
		border-bottom: 1px solid #ddd;
	}

	/* Style pour les en-têtes de colonnes */
	.don-table th {
		background-color: #e9ecef;
		text-align: left;
	}

	/* Style pour les boutons */
	.button-group {
		margin-top: 20px;
		text-align: center;
	}

	.button-group .btn {
		padding: 10px 20px;
		border-radius: 5px;
		background-color: #007bff;
		color: #fff;
		text-decoration: none;
		transition: background-color 0.3s;
	}

	.button-group .btn:hover {
		background-color: #0056b3;
	}

	/* Style pour le bouton Edit */
	.btn-edit {
		background-color: #28a745;
	}

	.btn-edit:hover {
		background-color: #218838;
	}
</style>
<script>
	document.getElementById('loadMore').addEventListener('click', function () {
var offset = document.querySelectorAll('.service-item').length;
fetch("{{ path('app_donsback_index') }}?offset=" + offset).then(response => response.text()).then(html => {
var parser = new DOMParser();
var doc = parser.parseFromString(html, 'text/html');
var newDons = doc.querySelector('#donationsContainer').innerHTML;
document.getElementById('donationsContainer').innerHTML += newDons;
if (doc.querySelector('.service-item') === null) { // Hide the Load More button if no more donations are available
document.getElementById('loadMore').style.display = 'none';
}
}).catch(error => console.error('Error loading more donations:', error));
});
</script>
<script>
	document.getElementById('toggleButton').addEventListener('click', function () {
var overlay = document.getElementById('overlay');
var content = document.getElementById('content');
overlay.style.display = (overlay.style.display === 'none' || overlay.style.display === '') ? 'block' : 'none';
content.style.display = (content.style.display === 'none' || content.style.display === '') ? 'block' : 'none';
});
</script>
<script>var backButton = document.getElementById("backButton");

// Ajouter un gestionnaire d'événements pour le clic sur le bouton
backButton.addEventListener("click", function() {
    // Masquer l'overlay
    document.getElementById("overlay").style.display = "none";
});</script>{% endblock %}
