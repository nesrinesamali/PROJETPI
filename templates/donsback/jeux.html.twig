{% extends 'base.html.twig' %}
{% block content %}
<style>@font-face {
    font-family: 'Montserrat';
    src: url("./assets/fonts/Montserrat-Medium.otf");
  }
  .container-with-border {
    border: 1px solid #ccc;
    padding: 20px;
    background-color: #f5f5f5;
  }
  body {
   
    background: #f7f7f7;
    font-family: "Montserrat", sans-serif;
  }
  
  #about {
    position: absolute;
    top: 10px;
    left: 10px;
    z-index: 2;
  }
  #about a {
    display: inline-block;
    height: 2.5em;
    margin: 0 5px;
  }
  
  #about a i {
    font-size: 1.5em;
  }
  
  #content {
    position: relative;
    margin: 50px auto;
    width: 600px;
    height: 600px;
  }
  
  h3 {
    position: absolute;
    top: 0px;
    left: 0px;
  }
  
  #blood_selector {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    grid-template-rows: 1fr 1fr;
    grid-gap: 5px;
    width: 200px;
    height: 100px;
    position: absolute;
    left: 10px;
    top: 45px;
    z-index: 2;
  }
  #blood_selector div {
    -webkit-user-select: none;
       -moz-user-select: none;
        -ms-user-select: none;
            user-select: none;
    display: -webkit-box;
    display: flex;
    -webkit-box-align: center;
            align-items: center;
    -webkit-box-pack: center;
            justify-content: center;
    background-color: #f7f7f7;
    border: 1px solid #13C5DD ;
    border-radius: 25%;
  }
  #blood_selector div:hover {
    border: 1px solid #1da1f2;
    font-weight: bold;
    cursor: pointer;
  }
  
  #blood_content {
    position: absolute;
    top: 50px;
    width: 100%;
    height: 100%;
  }
  
  #center_via_c {
    position: absolute;
    z-index: 1;
    width: 100%;
    height: 100%;
  }
  #center_via_c .center_via {
    width: 8px;
    background: #ccc;
    height: 200px;
    position: absolute;
    left: 304px;
    top: 276px;
  }
  #center_via_c .blood_via {
    height: 0;
    background-color: #b51e23;
    right: 50%;
    width: 8px;
    -webkit-transition: height 0.25s;
    transition: height 0.25s;
  }
  
  .bar {
    position: fixed;
    right: 0;
    top: 55px;
    width: 55%;
    height: 8px;
    border-radius: 2px 0 0 2px;
    
  }
  
  .main_bag {
    position: absolute;
    width: 100px;
    height: 140px;
    top: 70px;
    left: 250px;
    border-radius: 30px;
    opacity: 0.8;
    background-color: rgba(154, 207, 234, 0.9);
    border: 8px solid rgba(154, 207, 234, 0.9);
  }
  .main_bag .blood {
    position: absolute;
    left: 0;
    bottom: 0;
    width: 100%;
    height: 100px;
    background-color: #b51e23;
    border-radius: 0 0 35px 35px;
    -webkit-transition: height 1s;
    transition: height 1s;
  }
  .main_bag .blood::before {
    content: "";
    position: absolute;
    top: -6px;
    width: 100%;
    height: 10px;
    background-color: #92191b;
    border-radius: 100%;
  }
  .main_bag::before {
    content: "";
    position: absolute;
    top: -118px;
    left: 45%;
    width: 10%;
    height: 110px;
    background-color: #ccc;
  }
  
  #humans {
    position: absolute;
    top: 276px;
    width: 400px;
    height: 200px;
    left: 108px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: repeat(4, 1fr);
  }
  #humans .human {
    position: relative;
  }
  #humans .human .via {
    position: absolute;
    text-align: right;
    width: 100%;
    height: 8px;
    background-color: #ccc;
    bottom: 0;
  }
  #humans .human .blood_via {
    position: absolute;
    height: 8px;
    background-color: #b51e23;
    width: 0;
    bottom: 0;
    -webkit-transition: width 1s;
    transition: width 1s;
  }
  #humans .human.left {
    display: grid;
    -webkit-box-pack: left;
            justify-content: left;
    align-content: center;
  }
  #humans .human.left .blood_via {
    right: 0;
  }
  #humans .human.left .scribble {
    left: -30px;
  }
  #humans .human.left .scribble span {
    left: -40px;
    text-align: right;
  }
  #humans .human.right {
    display: grid;
    -webkit-box-pack: right;
            justify-content: right;
    align-content: center;
  }
  #humans .human.right .scribble {
    right: -60px;
  }
  #humans .human.right .scribble span {
    right: -10px;
  }
  #humans .human .scribble {
    position: absolute;
    height: 50px;
    width: 50px;
    top: 0;
    -webkit-transition: background 1s;
    transition: background 1s;
  }
  #humans .human .scribble span {
    position: absolute;
    display: grid;
    -webkit-box-align: end;
            align-items: end;
    height: 100%;
  }
  #humans .human .scribble .head {
    width: 30%;
    height: 30%;
    background-color: #13C5DD;
    border-radius: 50%;
    margin: 2px auto;
    -webkit-transition: background 1s;
    transition: background 1s;
    position: absolute;
    top: 30%;
    left: 5%;
  }
  #humans .human .scribble .body {
    position: absolute;
    bottom: 0;
    width: 40%;
    height: 30%;
    background-color: #13C5DD ;
    border-radius: 50% 50% 0 0;
    margin: 0 auto;
    -webkit-transition: background 1s;
    transition: background 1s;
  }
  
  .no_transition {
    -webkit-transition: none !important;
    transition: none !important;
  }
  
  .highlight {
    border: 2px solid #b51e23 !important;
    font-weight: bold;
  }
  
  .highlightText {
    font-weight: bold;
  }
  
  @media only screen and (max-width: 400px) {
    #content {
      position: relative;
      margin: 25px auto;
      width: 300px;
      height: 300px;
    }
    #content h3 {
      top: 10px;
      font-size: 1em;
    }
    #content #blood_selector {
      width: 150px;
      height: 75px;
      font-size: 0.75em;
      top: 45px;
    }
    #content .bar {
      top: 40px;
    }
    #content .main_bag {
      width: 75px;
      height: 105px;
      left: 125px;
    }
    #content .main_bag::before {
      top: -108px;
      height: 100px;
    }
    #content .main_bag .blood {
      height: 70%;
    }
    #content #center_via_c .center_via {
      left: 167px;
      top: 240px;
    }
    #content #humans {
      top: 240px;
      width: 180px;
      left: 85px;
    }
  }</style>
  


<!-- JEu bloque -->

<!-- Appointment Start -->
<div class="container-fluid bg-primary my-5 py-5">
<div class="container py-5">
    <div class="row gx-5">
        <div class="col-lg-6 mb-5 mb-lg-0">
            <div class="mb-4">
                <h5 class="d-inline-block text-white text-uppercase border-bottom border-5">ᗩᑭᑭOIᑎTᗰEᑎT</h5>
                <h1 class="display-4">𝐃𝐢𝐯𝐞 𝐈𝐧𝐭𝐨 𝐘𝐨𝐮𝐫 𝐁𝐥𝐨𝐨𝐝</h1>
            </div>
            <p class="text-white mb-5">𝙺𝚗𝚘𝚠𝚒𝚗𝚐 𝚢𝚘𝚞𝚛 𝚋𝚕𝚘𝚘𝚍 𝚝𝚢𝚙𝚎 𝚌𝚊𝚗 𝚖𝚊𝚔𝚎 𝚊 𝚜𝚒𝚐𝚗𝚒𝚏𝚒𝚌𝚊𝚗𝚝 𝚒𝚖𝚙𝚊𝚌𝚝 𝚒𝚗 𝚎𝚖𝚎𝚛𝚐𝚎𝚗𝚌𝚢 𝚜𝚒𝚝𝚞𝚊𝚝𝚒𝚘𝚗𝚜 𝚊𝚗𝚍 𝚖𝚎𝚍𝚒𝚌𝚊𝚕 𝚝𝚛𝚎𝚊𝚝𝚖𝚎𝚗𝚝𝚜. 𝚆𝚑𝚎𝚝𝚑𝚎𝚛 𝚢𝚘𝚞'𝚛𝚎 𝚊 𝚞𝚗𝚒𝚟𝚎𝚛𝚜𝚊𝚕 𝚍𝚘𝚗𝚘𝚛 𝚠𝚒𝚝𝚑 𝚝𝚢𝚙𝚎 𝙾 𝚘𝚛 𝚊 𝚛𝚊𝚛𝚎 𝚝𝚢𝚙𝚎 𝙰𝙱, 𝚢𝚘𝚞𝚛 𝚋𝚕𝚘𝚘𝚍 𝚍𝚘𝚗𝚊𝚝𝚒𝚘𝚗 𝚌𝚊𝚗 𝚙𝚛𝚘𝚟𝚒𝚍𝚎 𝚑𝚘𝚙𝚎 𝚊𝚗𝚍 𝚑𝚎𝚊𝚕𝚒𝚗𝚐 𝚝𝚘 𝚝𝚑𝚘𝚜𝚎 𝚏𝚊𝚌𝚒𝚗𝚐 𝚌𝚛𝚒𝚝𝚒𝚌𝚊𝚕 𝚌𝚘𝚗𝚍𝚒𝚝𝚒𝚘𝚗𝚜. 𝙹𝚘𝚒𝚗 𝚞𝚜 𝚒𝚗 𝚘𝚞𝚛 𝚖𝚒𝚜𝚜𝚒𝚘𝚗 𝚝𝚘 𝚎𝚗𝚜𝚞𝚛𝚎 𝚊 𝚜𝚝𝚊𝚋𝚕𝚎 𝚋𝚕𝚘𝚘𝚍 𝚜𝚞𝚙𝚙𝚕𝚢 𝚏𝚘𝚛 𝚑𝚘𝚜𝚙𝚒𝚝𝚊𝚕𝚜 𝚊𝚗𝚍 𝚙𝚊𝚝𝚒𝚎𝚗𝚝𝚜 𝚒𝚗 𝚗𝚎𝚎𝚍. 𝚈𝚘𝚞𝚛 𝚐𝚎𝚗𝚎𝚛𝚘𝚜𝚒𝚝𝚢 𝚌𝚊𝚗 𝚝𝚛𝚞𝚕𝚢 𝚖𝚊𝚔𝚎 𝚊 𝚕𝚒𝚏𝚎𝚜𝚊𝚟𝚒𝚗𝚐 𝚍𝚒𝚏𝚏𝚎𝚛𝚎𝚗𝚌𝚎</p>
            





        </p>
            <a class="btn btn-dark rounded-pill py-3 px-5 me-3" href="http://127.0.0.1:8001/donsback/new">Donate</a>
            <a class="btn btn-outline-dark rounded-pill py-3 px-5" href="">Back</a>
        </div>
        <div class="col-lg-6">
            <div class="bg-white text-center rounded p-0" style="width:110%">
                <form>
                    <div id="content">
      
                        <div class="col-md-6 text">
                        <div id="blood_selector">
                          <div>O−</div>
                          <div>O+</div>
                          <div>A−</div>
                          <div>A+</div>
                          <div>B−</div>
                          <div>B+</div>
                          <div>AB−</div>
                          <div>AB+</div>
                        </div>
                    </div>
                    <div class="col-md-6 image">
                        <div id="blood_content">
                          <div class="bar"></div>
                          <div class="main_bag">
                            <div class="blood"></div>
                          </div>
                        </div>
                        <div id="center_via_c">
                          <div class="center_via">
                            <div class="blood_via"></div>
                          </div>
                        </div>
                        <div id="humans">
                          <div class="human left">
                            <div class="scribble"><span class="blood_type">O−</span>
                              <div class="head"></div>
                              <div class="body"></div>
                            </div>
                            <div class="via"></div>
                            <div class="blood_via"></div>
                          </div>
                          <div class="human right">
                            <div class="scribble"><span class="blood_type">O+</span>
                              <div class="head"></div>
                              <div class="body"></div>
                            </div>
                            <div class="via"></div>
                            <div class="blood_via"></div>
                          </div>
                          <div class="human left">
                            <div class="scribble"><span class="blood_type">A−</span>
                              <div class="head"></div>
                              <div class="body"></div>
                            </div>
                            <div class="via"></div>
                            <div class="blood_via"></div>
                          </div>
                          <div class="human right">
                            <div class="scribble"><span class="blood_type">A+</span>
                              <div class="head"></div>
                              <div class="body"></div>
                            </div>
                            <div class="via"></div>
                            <div class="blood_via"></div>
                          </div>
                          <div class="human left">
                            <div class="scribble"><span class="blood_type">B−</span>
                              <div class="head"></div>
                              <div class="body"></div>
                            </div>
                            <div class="via"></div>
                            <div class="blood_via"></div>
                          </div>
                          <div class="human right">
                            <div class="scribble"><span class="blood_type">B+</span>
                              <div class="head"></div>
                              <div class="body"></div>
                            </div>
                            <div class="via"></div>
                            <div class="blood_via"></div>
                          </div>
                          <div class="human left">
                            <div class="scribble"><span class="blood_type">AB−</span>
                              <div class="head"></div>
                              <div class="body"></div>
                            </div>
                            <div class="via"></div>
                            <div class="blood_via"></div>
                          </div>
                          <div class="human right">
                            <div class="scribble"><span class="blood_type">AB+</span>
                              <div class="head"></div>
                              <div class="body"></div>
                            </div>
                            <div class="via"></div>
                            <div class="blood_via"></div>
                          </div>
                        </div>
                        </div>
                      </div>
                </form>
            </div>
        </div>
    </div>
</div>
</div>

</section>

<script>// Blood Types

const humans_parent = document.getElementById("humans");
const BLOOD_TYPES = {
  "O−": ["O−", "O+", "A−", "A+", "B−", "B+", "AB−", "AB+"],
  "O+": ["O+", "A+", "B+", "AB+"],
  "A−": ["A−", "A+", "AB−", "AB+"],
  "A+": ["A+", "AB+"],
  "B−": ["B−", "B+", "AB−", "AB+"],
  "B+": ["B+", "AB+"],
  "AB−": ["AB−", "AB+"],
  "AB+": ["AB+"]
};


const reset_button = document.getElementById("reset");
const selector = document.getElementById("blood_selector");
const blood_vias = document.querySelectorAll("#humans .human .blood_via");
const blood_bag = document.querySelector("#blood_content > div.main_bag > div");
const center_via = document.querySelector(".center_via > .blood_via");
const blood_types = document.querySelectorAll(".blood_type");
let lastCalled;
addListeners();

function callIfChildren(e) {
  if (lastCalled) change();
  if (e.target !== this) setRecipents(e);
}

function addListeners() {
  selector.addEventListener("click", callIfChildren);
  reset.addEventListener("click", reset);
}

function reset() {
  change();
  blood_bag.style.height = "100px";
  center_via.style.height = "0px";
}

function change() {
  lastCalled.target.classList.remove("highlight");

  for (let i = 0; i < blood_vias.length; i++) {
    blood_vias[i].style.width = "0px";
    blood_types[i].classList.remove("highlightText");
  }
}

function timeout(ms) {
  return new Promise((resolve) => setTimeout(resolve, ms));
}

async function setRecipents(e) {
  e.target.classList.add("highlight");
  lastCalled = e;

  const donor = e.target.innerText;
  for (let item of BLOOD_TYPES[donor]) {
    const recipent_index = Object.keys(BLOOD_TYPES).indexOf(item);
    const height = 50 + 50 * Math.floor(recipent_index / 2);
    const blood_height = 125 - 25 * Math.floor(recipent_index / 2);
    blood_bag.style.height = `${blood_height}px`;
    center_via.style.height = `${height}px`;

    await timeout(100);
    blood_vias[recipent_index].style.width = "100%";
    blood_types[recipent_index].classList.add("highlightText");
  }
}</script>
{% endblock %}